/* simple-module v3.0.0 | (c) Mycolorway Design | MIT License */
var EventEmitter,SimpleModule,_,extend=function(e,t){function n(){this.constructor=e}for(var r in t)hasProp.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty,slice=[].slice;EventEmitter=require("eventemitter2"),_=require("lodash"),SimpleModule=function(e){function t(e){_.extend(this.opts,e),this.opts.plugins.forEach(function(e){return function(t){return e.plugins[t]=new e.constructor.plugins[t](e)}}(this))}return extend(t,e),t.extend=function(e){var t,n,r;if(!e||"object"!=typeof e)throw new Error("SimpleModule.extend: param should be an object");for(t in e)r=e[t],"included"!==t&&"extended"!==t&&(this[t]=r);return null!=(n=e.extended)&&n.call(this),this},t.include=function(e){var t,n,r;if(!e||"object"!=typeof e)throw new Error("SimpleModule.include: param should be an object");for(t in e)r=e[t],"included"!==t&&"extended"!==t&&(this.prototype[t]=r);return null!=(n=e.included)&&n.call(this),this},t.plugins={},t.plugin=function(e,t){if(!e||"string"!=typeof e)throw new Error("SimpleModule.plugin: first param should be a string");if("function"!=typeof t)throw new Error("SimpleModule.plugin: second param should be a class reference");return this.plugins[e]=t},t.prototype.opts={plugins:[]},t.prototype.plugins={},t.prototype.one=function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],this.once.apply(this,e)},t.prototype.trigger=function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],this.emit.apply(this,e)},t.prototype.triggerAsync=function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],this.emitAsync.apply(this,e)},t}(EventEmitter),module.exports=SimpleModule;