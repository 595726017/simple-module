/* simple-module v3.0.2 | (c) Mycolorway Design | MIT License */
var EventEmitter,SimpleModule,_,extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,slice=[].slice;EventEmitter=require("eventemitter2"),_=require("lodash"),SimpleModule=function(t){function e(t){e.__super__.constructor.call(this),this.opts=_.extend({},e.opts,t),this.opts.plugins.forEach(function(t){return function(n){return t.plugins[n]=new e.plugins[n](t)}}(this))}return extend(e,t),e.extend=function(t){var e,n,r;if(!t||"object"!=typeof t)throw new Error("SimpleModule.extend: param should be an object");for(e in t)r=t[e],"included"!==e&&"extended"!==e&&(this[e]=r);return null!=(n=t.extended)&&n.call(this),this},e.include=function(t){var e,n,r;if(!t||"object"!=typeof t)throw new Error("SimpleModule.include: param should be an object");for(e in t)r=t[e],"included"!==e&&"extended"!==e&&(this.prototype[e]=r);return null!=(n=t.included)&&n.call(this),this},e.plugins={},e.plugin=function(t,e){if(!t||"string"!=typeof t)throw new Error("SimpleModule.plugin: first param should be a string");if("function"!=typeof e)throw new Error("SimpleModule.plugin: second param should be a class");return this.plugins[t]=e,this},e.opts={plugins:[]},e.prototype.plugins={},e.prototype.off=function(t,n){return _.isFunction(n)?e.__super__.off.call(this,t,n):this.removeAllListeners(t)},e.prototype.one=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],this.once.apply(this,t)},e.prototype.trigger=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],this.emit.apply(this,t)},e.prototype.triggerAsync=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],this.emitAsync.apply(this,t)},e}(EventEmitter),module.exports=SimpleModule;